/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/app.ts":
/*!********************!*\
  !*** ./src/app.ts ***!
  \********************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nvar router_1 = __webpack_require__(/*! ./router */ \"./src/router.ts\");\nvar App = /** @class */ (function () {\n    function App() {\n        this.router = new router_1.Router();\n        window.addEventListener(\"DOMContentLoaded\", this.handleRouterChanging.bind(this));\n        window.addEventListener(\"popstate\", this.handleRouterChanging.bind(this));\n    }\n    // Запуск роутера\n    App.prototype.handleRouterChanging = function () {\n        this.router.openRoute();\n    };\n    return App;\n}());\n(new App());\n\n\n//# sourceURL=webpack://quiz/./src/app.ts?");

/***/ }),

/***/ "./src/components/choice.ts":
/*!**********************************!*\
  !*** ./src/components/choice.ts ***!
  \**********************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.Choice = void 0;\nvar castom_http_1 = __webpack_require__(/*! ../services/castom-http */ \"./src/services/castom-http.ts\");\nvar config_1 = __importDefault(__webpack_require__(/*! ../config/config */ \"./src/config/config.ts\"));\nvar auth_1 = __webpack_require__(/*! ../services/auth */ \"./src/services/auth.ts\");\nvar Choice = /** @class */ (function () {\n    function Choice() {\n        this.quizzes = [];\n        this.testResult = null;\n        this.init();\n    }\n    Choice.prototype.init = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, error_1, userInfo, result, error_2;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        _b.trys.push([0, 2, , 3]);\n                        _a = this;\n                        return [4 /*yield*/, castom_http_1.CustomHttp.request(config_1.default.host + \"/tests\")];\n                    case 1:\n                        _a.quizzes = _b.sent();\n                        return [3 /*break*/, 3];\n                    case 2:\n                        error_1 = _b.sent();\n                        console.log(error_1);\n                        return [2 /*return*/];\n                    case 3:\n                        userInfo = auth_1.Auth.getUserInfo();\n                        if (!userInfo) return [3 /*break*/, 7];\n                        _b.label = 4;\n                    case 4:\n                        _b.trys.push([4, 6, , 7]);\n                        return [4 /*yield*/, castom_http_1.CustomHttp.request(config_1.default.host + \"/tests/results?userId=\" + userInfo.userId)];\n                    case 5:\n                        result = _b.sent();\n                        if (result) {\n                            if (result.error !== undefined) {\n                                throw new Error(result.message);\n                            }\n                            this.testResult = result;\n                        }\n                        return [3 /*break*/, 7];\n                    case 6:\n                        error_2 = _b.sent();\n                        console.log(error_2);\n                        return [2 /*return*/];\n                    case 7:\n                        this.processQuizzes();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    Choice.prototype.processQuizzes = function () {\n        var _this = this;\n        var choiceOptionsElement = document.getElementById(\"choice-options\");\n        if (this.quizzes && this.quizzes.length > 0 && choiceOptionsElement) {\n            this.quizzes.forEach(function (quiz) {\n                var that = _this;\n                var choiceOptionElement = document.createElement(\"div\");\n                choiceOptionElement.className = \"choice-option\";\n                choiceOptionElement.setAttribute(\"data-id\", quiz.id.toString());\n                choiceOptionElement.onclick = function () {\n                    that.chooseQuiz(this);\n                };\n                var choiceOptionTextElement = document.createElement(\"div\");\n                choiceOptionTextElement.className = \"choice-option-text\";\n                choiceOptionTextElement.innerText = quiz.name;\n                var choiceOptionArrowElement = document.createElement(\"div\");\n                choiceOptionArrowElement.className = \"choice-option-arrow\";\n                if (_this.testResult) {\n                    var result = _this.testResult.find(function (item) { return item.testId === quiz.id; });\n                    if (result) {\n                        var choiceOptionResultElement = document.createElement(\"div\");\n                        choiceOptionResultElement.className = \"choice-option-result\";\n                        choiceOptionResultElement.innerHTML =\n                            \"<div>Результат :</div><div>\" + result.score + \"/\" + result.total + \"</div>\";\n                        choiceOptionElement.appendChild(choiceOptionResultElement);\n                    }\n                }\n                var choiceOptionImageElement = document.createElement(\"img\");\n                choiceOptionImageElement.setAttribute(\"src\", \"images/arrow.png\");\n                choiceOptionImageElement.setAttribute(\"alt\", \"Arrow\");\n                choiceOptionArrowElement.appendChild(choiceOptionImageElement);\n                choiceOptionElement.appendChild(choiceOptionTextElement);\n                choiceOptionElement.appendChild(choiceOptionArrowElement);\n                choiceOptionsElement.appendChild(choiceOptionElement);\n            });\n        }\n    };\n    Choice.prototype.chooseQuiz = function (element) {\n        var dataId = element.getAttribute(\"data-id\");\n        if (dataId) {\n            location.href = \"#/test?id=\" + dataId;\n        }\n    };\n    return Choice;\n}());\nexports.Choice = Choice;\n\n\n//# sourceURL=webpack://quiz/./src/components/choice.ts?");

/***/ }),

/***/ "./src/components/form.ts":
/*!********************************!*\
  !*** ./src/components/form.ts ***!
  \********************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.Form = void 0;\nvar castom_http_1 = __webpack_require__(/*! ../services/castom-http */ \"./src/services/castom-http.ts\");\nvar auth_1 = __webpack_require__(/*! ../services/auth */ \"./src/services/auth.ts\");\nvar config_1 = __importDefault(__webpack_require__(/*! ../config/config */ \"./src/config/config.ts\"));\nvar Form = /** @class */ (function () {\n    // Указываем параметр page для того что управлять аутентификацией\n    function Form(page) {\n        this.agreeElement = null;\n        this.processElement = null;\n        this.fields = [];\n        this.page = page;\n        this.email = null;\n        var accessToken = localStorage.getItem(auth_1.Auth.accessTokenKey);\n        if (accessToken) {\n            location.href = \"#/choice\";\n            return;\n        }\n        this.fields = [{\n                name: \"email\",\n                id: \"email\",\n                element: null,\n                regex: /^[^ ]+@[^ ]+\\.[a-z]{2,3}$/,\n                valid: false\n            }, {\n                name: \"password\",\n                id: \"password\",\n                element: null,\n                regex: /^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])[0-9a-zA-Z]{8,}$/,\n                valid: false\n            }];\n        // Если страница === регистрации тогда добавляем в начало массива fields два новых обьекта\n        if (this.page === \"signup\") {\n            this.fields.unshift({\n                name: \"name\",\n                id: \"name\",\n                element: null,\n                regex: /^[А-Я][а-я]+\\s*$/,\n                valid: false\n            }, {\n                name: \"lastName\",\n                id: \"last-name\",\n                element: null,\n                regex: /^[А-Я][а-я]+\\s*$/,\n                valid: false\n            });\n        }\n        var that = this;\n        this.fields.forEach(function (item) {\n            item.element = document.getElementById(item.id);\n            if (item.element) {\n                item.element.onchange = function () {\n                    that.validateField.call(that, item, this);\n                };\n            }\n        });\n        // Находим кнопку отправки формы\n        this.processElement = document.getElementById(\"process\");\n        if (this.processElement) {\n            this.processElement.onclick = function () {\n                that.processForm();\n            };\n        }\n        // Ecли открыта страница регистрации то проверяем чекбокс\n        if (this.page === \"signup\") {\n            // Находим чекбокс\n            this.agreeElement = document.getElementById(\"agree\");\n            if (this.agreeElement) {\n                // Вешаем обработчик по изменению значения\n                this.agreeElement.onchange = function () {\n                    that.validateForm();\n                };\n            }\n        }\n    }\n    Form.prototype.validateField = function (field, element) {\n        if (element.parentNode) {\n            if (!element.value || !element.value.match(field.regex)) {\n                element.parentNode.style.borderColor = \"red\";\n                field.valid = false;\n            }\n            else {\n                element.parentNode.removeAttribute(\"style\");\n                field.valid = true;\n            }\n        }\n        // Вызываем функцию для проверки валидности полей\n        this.validateForm();\n    };\n    // Проверить на то что все поля валидны\n    Form.prototype.validateForm = function () {\n        var validForm = this.fields.every(function (el) { return el.valid; });\n        var isValid = this.agreeElement ? this.agreeElement.checked && validForm : validForm;\n        if (this.processElement) {\n            if (isValid) {\n                this.processElement.removeAttribute(\"disabled\");\n            }\n            else {\n                this.processElement.setAttribute(\"disabled\", \"disabled\");\n            }\n        }\n        return isValid;\n    };\n    Form.prototype.processForm = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var email, password, result, error_1, result, error_2;\n            var _a, _b, _c, _d, _e, _f, _g, _h;\n            return __generator(this, function (_j) {\n                switch (_j.label) {\n                    case 0:\n                        if (!this.validateForm()) return [3 /*break*/, 7];\n                        email = (_b = (_a = this.fields.find(function (item) { return item.name === \"email\"; })) === null || _a === void 0 ? void 0 : _a.element) === null || _b === void 0 ? void 0 : _b.value;\n                        password = (_d = (_c = this.fields.find(function (item) { return item.name === \"password\"; })) === null || _c === void 0 ? void 0 : _c.element) === null || _d === void 0 ? void 0 : _d.value;\n                        if (!(this.page === \"signup\")) return [3 /*break*/, 4];\n                        _j.label = 1;\n                    case 1:\n                        _j.trys.push([1, 3, , 4]);\n                        return [4 /*yield*/, castom_http_1.CustomHttp.request(config_1.default.host + \"/signup\", \"POST\", {\n                                name: (_f = (_e = this.fields.find(function (item) { return item.name === \"name\"; })) === null || _e === void 0 ? void 0 : _e.element) === null || _f === void 0 ? void 0 : _f.value,\n                                lastName: (_h = (_g = this.fields.find(function (item) { return item.name === \"lastName\"; })) === null || _g === void 0 ? void 0 : _g.element) === null || _h === void 0 ? void 0 : _h.value,\n                                email: email,\n                                password: password\n                            })\n                            // Если прошло успешно\n                        ];\n                    case 2:\n                        result = _j.sent();\n                        // Если прошло успешно\n                        if (result) {\n                            // Проверяем на ошибки и на то что мы получили данные пользователя\n                            // Если данные есть и ошибки нет то перенаправляем человека на след страницу\n                            if (result.error || !result.user) {\n                                throw new Error(result.message);\n                            }\n                            this.email = result.user.email;\n                        }\n                        return [3 /*break*/, 4];\n                    case 3:\n                        error_1 = _j.sent();\n                        return [2 /*return*/, console.log(error_1)];\n                    case 4:\n                        _j.trys.push([4, 6, , 7]);\n                        return [4 /*yield*/, castom_http_1.CustomHttp.request(config_1.default.host + \"/login\", \"POST\", {\n                                email: email,\n                                password: password\n                            })\n                            // Если прошло успешно\n                        ];\n                    case 5:\n                        result = _j.sent();\n                        // Если прошло успешно\n                        if (result) {\n                            console.log(result);\n                            // Проверяем на ошибки и на то что мы получили данные пользователя\n                            // Если данные есть и ошибки нет то перенаправляем человека на след страницу\n                            if (result.error || !result.accessToken || !result.refreshToken || !result.fullName || !result.userId) {\n                                throw new Error(result.message);\n                            }\n                            // Сохраняем токены в локальное хранилище,\n                            // Сохраняем инфо пользователя в локальное хранилище\n                            auth_1.Auth.setTokens(result.accessToken, result.refreshToken);\n                            auth_1.Auth.setUserInfo({\n                                fullName: result.fullName,\n                                userId: result.userId,\n                                email: this.email\n                            });\n                            // Перенаправление на страницу выбора теста\n                            location.href = \"#/choice\";\n                        }\n                        return [3 /*break*/, 7];\n                    case 6:\n                        error_2 = _j.sent();\n                        console.log(error_2);\n                        return [3 /*break*/, 7];\n                    case 7: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    return Form;\n}());\nexports.Form = Form;\n\n\n//# sourceURL=webpack://quiz/./src/components/form.ts?");

/***/ }),

/***/ "./src/components/result.ts":
/*!**********************************!*\
  !*** ./src/components/result.ts ***!
  \**********************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.Result = void 0;\nvar store_manager_1 = __webpack_require__(/*! ../utils/store-manager */ \"./src/utils/store-manager.ts\");\nvar castom_http_1 = __webpack_require__(/*! ../services/castom-http */ \"./src/services/castom-http.ts\");\nvar config_1 = __importDefault(__webpack_require__(/*! ../config/config */ \"./src/config/config.ts\"));\nvar auth_1 = __webpack_require__(/*! ../services/auth */ \"./src/services/auth.ts\");\nvar Result = /** @class */ (function () {\n    function Result() {\n        this.routeParams = store_manager_1.StoreManager.getQueryParams();\n        this.init();\n    }\n    Result.prototype.init = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var userInfo, result, resultScoreElement, resultValueElement, e_1;\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        userInfo = auth_1.Auth.getUserInfo();\n                        if (!userInfo) {\n                            location.href = \"#/\";\n                            return [2 /*return*/];\n                        }\n                        if (!this.routeParams.id) return [3 /*break*/, 4];\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 3, , 4]);\n                        return [4 /*yield*/, castom_http_1.CustomHttp.request(config_1.default.host + \"/tests/\" + this.routeParams.id + \"/result?userId=\" + userInfo.userId)];\n                    case 2:\n                        result = _a.sent();\n                        if (result) {\n                            if (result.error !== undefined) {\n                                throw new Error(result.message);\n                            }\n                            resultScoreElement = document.getElementById(\"result-score\");\n                            if (resultScoreElement)\n                                resultScoreElement.innerText = result.score + \"/\" + result.total;\n                            resultValueElement = document.getElementById(\"result-value\");\n                            if (resultValueElement) {\n                                resultValueElement.addEventListener(\"click\", function (e) {\n                                    e.preventDefault();\n                                    location.href = \"#/resultValue?id=\" + _this.routeParams.id;\n                                });\n                            }\n                            return [2 /*return*/];\n                        }\n                        return [3 /*break*/, 4];\n                    case 3:\n                        e_1 = _a.sent();\n                        console.log(e_1);\n                        return [3 /*break*/, 4];\n                    case 4:\n                        location.href = \"#/\";\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    return Result;\n}());\nexports.Result = Result;\n\n\n//# sourceURL=webpack://quiz/./src/components/result.ts?");

/***/ }),

/***/ "./src/components/resultValue.ts":
/*!***************************************!*\
  !*** ./src/components/resultValue.ts ***!
  \***************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.ResultValue = void 0;\nvar store_manager_1 = __webpack_require__(/*! ../utils/store-manager */ \"./src/utils/store-manager.ts\");\nvar auth_1 = __webpack_require__(/*! ../services/auth */ \"./src/services/auth.ts\");\nvar castom_http_1 = __webpack_require__(/*! ../services/castom-http */ \"./src/services/castom-http.ts\");\nvar config_1 = __importDefault(__webpack_require__(/*! ../config/config */ \"./src/config/config.ts\"));\nvar ResultValue = /** @class */ (function () {\n    function ResultValue() {\n        this.preTitle = null;\n        this.resTitle = null;\n        this.resOptions = null;\n        this.resUser = null;\n        this.resultDetailsTest = null;\n        this.dataUsers = localStorage.getItem(\"userInfo\");\n        this.dataPars = JSON.parse(this.dataUsers);\n        if (this.dataPars) {\n            this.localStorageFullName = this.dataPars.fullName;\n            this.localStorageEmail = this.dataPars.email;\n        }\n        this.routeParams = store_manager_1.StoreManager.getQueryParams();\n        this.init();\n    }\n    ResultValue.prototype.init = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var userInfo, resultTest, e_1;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        userInfo = auth_1.Auth.getUserInfo();\n                        if (!userInfo) {\n                            location.href = \"#/\";\n                            return [2 /*return*/];\n                        }\n                        if (!userInfo) return [3 /*break*/, 4];\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 3, , 4]);\n                        return [4 /*yield*/, castom_http_1.CustomHttp.request(config_1.default.host + \"/tests/\" + this.routeParams.id + \"/result/details?userId=\" + userInfo.userId)];\n                    case 2:\n                        resultTest = _a.sent();\n                        if (resultTest) {\n                            if (resultTest.error !== undefined) {\n                                throw new Error(resultTest.message);\n                            }\n                            this.resultDetailsTest = resultTest;\n                            this.resultQuiz();\n                        }\n                        return [3 /*break*/, 4];\n                    case 3:\n                        e_1 = _a.sent();\n                        console.log(e_1);\n                        return [3 /*break*/, 4];\n                    case 4: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    ResultValue.prototype.resultQuiz = function () {\n        var _this = this;\n        this.preTitle = document.getElementById(\"pre-title\");\n        this.resTitle = document.getElementById(\"res-title\");\n        this.resOptions = document.getElementById(\"res-options\");\n        this.resUser = document.getElementById(\"user-name\");\n        this.showResultQuiz();\n        if (this.resUser)\n            this.resUser.innerText = \"\".concat(this.localStorageFullName, \", \").concat(this.localStorageEmail);\n        var buttonBackResult = document.getElementById(\"result-value\");\n        if (buttonBackResult) {\n            buttonBackResult.addEventListener(\"click\", function (e) {\n                e.preventDefault();\n                location.href = \"#/result?id=\" + _this.routeParams.id;\n            });\n        }\n    };\n    ResultValue.prototype.showResultQuiz = function () {\n        var _this = this;\n        if (!this.resultDetailsTest)\n            return;\n        if (this.preTitle)\n            this.preTitle.innerHTML = this.resultDetailsTest.name;\n        this.resultDetailsTest.questions.map(function (item, index) {\n            _this.resTitle = document.createElement(\"div\");\n            _this.resTitle.className = \"result-question-title\";\n            _this.resTitle.innerHTML = \"\\n\\t\\t\\t\\t<span>\\u0412\\u043E\\u043F\\u0440\\u043E\\u0441 \".concat(index + 1, \" : </span> \\n\\t\\t\\t\\t\").concat(item.question, \"\\n\\t\\t\");\n            if (_this.resOptions)\n                _this.resOptions.appendChild(_this.resTitle);\n            item.answers.forEach(function (item) {\n                var inputId = \"answer-\".concat(item.id);\n                var optionElement = document.createElement(\"div\");\n                optionElement.className = \"result-question-option\";\n                var inputElement = document.createElement(\"input\");\n                inputElement.className = \"option-answer\";\n                inputElement.setAttribute(\"id\", inputId);\n                inputElement.setAttribute(\"type\", \"radio\");\n                inputElement.setAttribute(\"name\", \"answer\");\n                inputElement.setAttribute(\"value\", item.id.toString());\n                var labelElement = document.createElement(\"label\");\n                labelElement.setAttribute(\"for\", inputId);\n                labelElement.innerText = item.answer;\n                if (item.correct === true) {\n                    labelElement.className = \"result-success\";\n                    inputElement.className = \"result-input-success\";\n                }\n                else if (item.correct === false) {\n                    labelElement.className = \"result-error\";\n                    inputElement.className = \"result-input-error\";\n                }\n                optionElement.appendChild(inputElement);\n                optionElement.appendChild(labelElement);\n                if (_this.resOptions)\n                    _this.resOptions.appendChild(optionElement);\n            });\n        });\n    };\n    return ResultValue;\n}());\nexports.ResultValue = ResultValue;\n\n\n//# sourceURL=webpack://quiz/./src/components/resultValue.ts?");

/***/ }),

/***/ "./src/components/test.ts":
/*!********************************!*\
  !*** ./src/components/test.ts ***!
  \********************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.Test = void 0;\nvar store_manager_1 = __webpack_require__(/*! ../utils/store-manager */ \"./src/utils/store-manager.ts\");\nvar castom_http_1 = __webpack_require__(/*! ../services/castom-http */ \"./src/services/castom-http.ts\");\nvar config_1 = __importDefault(__webpack_require__(/*! ../config/config */ \"./src/config/config.ts\"));\nvar auth_1 = __webpack_require__(/*! ../services/auth */ \"./src/services/auth.ts\");\nvar action_test_type_1 = __webpack_require__(/*! ../types/action-test.type */ \"./src/types/action-test.type.ts\");\nvar Test = /** @class */ (function () {\n    function Test() {\n        this.progressBarElement = null;\n        this.nextButtonElement = null;\n        this.passButtonElement = null;\n        this.prevButtonElement = null;\n        this.questionTitleElement = null;\n        this.optionsElement = null;\n        this.quiz = null;\n        this.interval = 0;\n        this.currentQuestionIndex = 1;\n        this.userResult = [];\n        this.KEY_RESULT_QUIZ = \"result-quiz\";\n        this.KEY_RESULT_RESPONSE = \"result-response\";\n        this.routeParams = store_manager_1.StoreManager.getQueryParams();\n        this.init();\n    }\n    Test.prototype.init = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var result, error_1;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!this.routeParams.id) return [3 /*break*/, 4];\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 3, , 4]);\n                        return [4 /*yield*/, castom_http_1.CustomHttp.request(config_1.default.host + \"/tests/\" + this.routeParams.id)];\n                    case 2:\n                        result = _a.sent();\n                        if (result) {\n                            if (result.error !== undefined) {\n                                throw new Error(result.message);\n                            }\n                            this.quiz = result;\n                            this.startQuiz();\n                        }\n                        return [3 /*break*/, 4];\n                    case 3:\n                        error_1 = _a.sent();\n                        console.log(error_1);\n                        return [3 /*break*/, 4];\n                    case 4: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    Test.prototype.startQuiz = function () {\n        if (!this.quiz)\n            return;\n        this.progressBarElement = document.getElementById(\"progress-bar\");\n        this.questionTitleElement = document.getElementById(\"title\");\n        this.optionsElement = document.getElementById(\"options\");\n        // Далее\n        this.nextButtonElement = document.getElementById(\"next\");\n        if (this.nextButtonElement) {\n            this.nextButtonElement.onclick = this.move.bind(this, action_test_type_1.ActionTestType.next);\n        }\n        // Пропустить\n        this.passButtonElement = document.getElementById(\"pass\");\n        if (this.passButtonElement) {\n            this.passButtonElement.onclick = this.move.bind(this, action_test_type_1.ActionTestType.pass);\n        }\n        var preTitleElement = document.getElementById(\"pre-title\");\n        if (preTitleElement) {\n            preTitleElement.innerText = this.quiz.name;\n        }\n        // Назад\n        this.prevButtonElement = document.getElementById(\"prev\");\n        if (this.prevButtonElement) {\n            this.prevButtonElement.onclick = this.move.bind(this, action_test_type_1.ActionTestType.prev);\n        }\n        // Отображаем вопрос и варианты ответа\n        this.prepareProgressBar();\n        this.showQuestion();\n        // Таймер теста\n        var timerElement = document.getElementById(\"timer\");\n        var seconds = 159;\n        var that = this;\n        this.interval = window.setInterval(function () {\n            seconds--;\n            if (timerElement)\n                timerElement.innerText = seconds.toString();\n            if (seconds === 0) {\n                clearInterval(that.interval);\n                that.complete();\n            }\n        }.bind(this), 1000);\n    };\n    Test.prototype.prepareProgressBar = function () {\n        if (!this.quiz)\n            return;\n        for (var i = 0; i < this.quiz.questions.length; i++) {\n            var itemElement = document.createElement(\"div\");\n            itemElement.className =\n                \"test-progress-bar-item \" + (i === 0 ? \"active\" : \"\");\n            var itemCircleElement = document.createElement(\"div\");\n            itemCircleElement.className = \"test-progress-bar-item-circle\";\n            var itemTextElement = document.createElement(\"div\");\n            itemTextElement.className = \"test-progress-bar-item-text\";\n            itemTextElement.innerText = \"\\u0412\\u043E\\u043F\\u0440\\u043E\\u0441 \".concat(i + 1);\n            itemElement.appendChild(itemCircleElement);\n            itemElement.appendChild(itemTextElement);\n            if (this.progressBarElement)\n                this.progressBarElement.appendChild(itemElement);\n        }\n    };\n    Test.prototype.showQuestion = function () {\n        var _this = this;\n        if (!this.quiz)\n            return;\n        var activeQuestion = this.quiz.questions[this.currentQuestionIndex - 1];\n        if (this.questionTitleElement) {\n            this.questionTitleElement.innerHTML = \"\\n          <span>\\u0412\\u043E\\u043F\\u0440\\u043E\\u0441 \".concat(this.currentQuestionIndex, \" - </span> \\n          \").concat(activeQuestion.question, \"\\n      \");\n        }\n        if (this.optionsElement) {\n            this.optionsElement.innerHTML = \"\";\n        }\n        var that = this;\n        var chosenOption = this.userResult.find(function (item) { return item.questionId === activeQuestion.id; });\n        that.choose();\n        activeQuestion.answers.forEach(function (answer) {\n            var inputId = \"answer-\".concat(answer.id);\n            var optionElement = document.createElement(\"div\");\n            optionElement.className = \"test-question-option\";\n            var inputElement = document.createElement(\"input\");\n            inputElement.className = \"option-answer\";\n            inputElement.setAttribute(\"id\", inputId);\n            inputElement.setAttribute(\"type\", \"radio\");\n            inputElement.setAttribute(\"name\", \"answer\");\n            inputElement.setAttribute(\"value\", answer.id.toString());\n            if (chosenOption && chosenOption.chosenAnswerId === answer.id) {\n                inputElement.setAttribute(\"checked\", \"checked\");\n            }\n            inputElement.onchange = function () {\n                that.chooseAnswer();\n            };\n            var labelElement = document.createElement(\"label\");\n            labelElement.setAttribute(\"for\", inputId);\n            labelElement.innerText = answer.answer;\n            optionElement.appendChild(inputElement);\n            optionElement.appendChild(labelElement);\n            if (_this.optionsElement)\n                _this.optionsElement.appendChild(optionElement);\n        });\n        // Проверяем на то есть ли у нас ответ на вопрос\n        // (Если ответ на вопрос есть тогда делаем кнопку доступной) иначе (кнопка заблокирована)\n        if (this.nextButtonElement) {\n            if (chosenOption && chosenOption.chosenAnswerId) {\n                this.nextButtonElement.removeAttribute(\"disabled\");\n            }\n            else {\n                this.nextButtonElement.setAttribute(\"disabled\", \"disabled\");\n            }\n        }\n        // Проверка (Если последний вопрос то меняем значение кнопки Далее на Завершить) иначе (Возвращаем значение)\n        if (this.nextButtonElement) {\n            if (this.currentQuestionIndex === this.quiz.questions.length) {\n                this.nextButtonElement.innerHTML = \"Завершить\";\n            }\n            else {\n                this.nextButtonElement.innerHTML = \"Далее\";\n            }\n        }\n        // Проверка (Если второй вопрос добавляем возможность работать с кнопкой \"Назад\") иначе (Кнопка заблокирована)\n        if (this.prevButtonElement) {\n            if (this.currentQuestionIndex > 1) {\n                this.prevButtonElement.removeAttribute(\"disabled\");\n            }\n            else {\n                this.prevButtonElement.setAttribute(\"disabled\", \"disabled\");\n            }\n        }\n    };\n    Test.prototype.chooseAnswer = function () {\n        if (this.passButtonElement && this.nextButtonElement) {\n            this.passButtonElement.classList.add(\"disabled\");\n            this.nextButtonElement.removeAttribute(\"disabled\");\n        }\n    };\n    Test.prototype.choose = function () {\n        if (this.passButtonElement)\n            this.passButtonElement.classList.remove(\"disabled\");\n    };\n    Test.prototype.move = function (action) {\n        var _this = this;\n        if (!this.quiz)\n            return;\n        // Получаем результаты теста и записываем в массив\n        var activeQuestionId = this.quiz.questions[this.currentQuestionIndex - 1];\n        var chosenAnswer = Array.from(document.getElementsByClassName(\"option-answer\")).find(function (el) {\n            return el.checked;\n        });\n        var chosenAnswerId = null;\n        if (chosenAnswer && chosenAnswer.value) {\n            chosenAnswerId = Number(chosenAnswer.value);\n        }\n        // Проверяем есть ли уже в массиве обект для такого questionId\n        var existingResult = this.userResult.find(function (item) {\n            return item.questionId === activeQuestionId.id;\n        });\n        if (chosenAnswerId) {\n            if (existingResult) {\n                existingResult.chosenAnswerId = chosenAnswerId;\n            }\n            else {\n                this.userResult.push({\n                    questionId: activeQuestionId.id,\n                    chosenAnswerId: chosenAnswerId\n                });\n            }\n        }\n        sessionStorage.setItem(this.KEY_RESULT_QUIZ, JSON.stringify(this.userResult));\n        // Пагинация\n        if (action === action_test_type_1.ActionTestType.next || action === action_test_type_1.ActionTestType.pass) {\n            this.currentQuestionIndex++;\n        }\n        else {\n            this.currentQuestionIndex--;\n        }\n        if (this.currentQuestionIndex > this.quiz.questions.length) {\n            clearInterval(this.interval);\n            this.complete();\n            return;\n        }\n        if (this.progressBarElement) {\n            Array.from(this.progressBarElement.children).forEach(function (item, index) {\n                var currentItemIndex = index + 1;\n                item.classList.remove(\"complete\");\n                item.classList.remove(\"active\");\n                if (currentItemIndex === _this.currentQuestionIndex) {\n                    item.classList.add(\"active\");\n                }\n                else if (currentItemIndex < _this.currentQuestionIndex) {\n                    item.classList.add(\"complete\");\n                }\n            });\n        }\n        this.showQuestion();\n    };\n    Test.prototype.complete = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var userInfo, result, e_1;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        userInfo = auth_1.Auth.getUserInfo();\n                        if (!userInfo) {\n                            location.href = \"#/\";\n                            return [2 /*return*/];\n                        }\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 3, , 4]);\n                        return [4 /*yield*/, castom_http_1.CustomHttp.request(config_1.default.host + \"/tests/\" + this.routeParams.id + \"/pass\", \"POST\", {\n                                userId: userInfo.userId,\n                                results: this.userResult\n                            })];\n                    case 2:\n                        result = _a.sent();\n                        if (result) {\n                            if (result.error !== undefined) {\n                                throw new Error(result.message);\n                            }\n                            location.href = \"#/result?id=\" + this.routeParams.id;\n                        }\n                        return [3 /*break*/, 4];\n                    case 3:\n                        e_1 = _a.sent();\n                        console.log(e_1);\n                        return [3 /*break*/, 4];\n                    case 4: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    return Test;\n}());\nexports.Test = Test;\n\n\n//# sourceURL=webpack://quiz/./src/components/test.ts?");

/***/ }),

/***/ "./src/config/config.ts":
/*!******************************!*\
  !*** ./src/config/config.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports[\"default\"] = {\n    host: 'http://localhost:3001/api'\n};\n\n\n//# sourceURL=webpack://quiz/./src/config/config.ts?");

/***/ }),

/***/ "./src/router.ts":
/*!***********************!*\
  !*** ./src/router.ts ***!
  \***********************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.Router = void 0;\nvar form_1 = __webpack_require__(/*! ./components/form */ \"./src/components/form.ts\");\nvar choice_1 = __webpack_require__(/*! ./components/choice */ \"./src/components/choice.ts\");\nvar test_1 = __webpack_require__(/*! ./components/test */ \"./src/components/test.ts\");\nvar result_1 = __webpack_require__(/*! ./components/result */ \"./src/components/result.ts\");\nvar resultValue_1 = __webpack_require__(/*! ./components/resultValue */ \"./src/components/resultValue.ts\");\nvar auth_1 = __webpack_require__(/*! ./services/auth */ \"./src/services/auth.ts\");\nvar Router = /** @class */ (function () {\n    function Router() {\n        this.contentElement = document.getElementById(\"content\");\n        this.stylesElement = document.getElementById(\"styles\");\n        this.pageTitleElement = document.getElementById(\"page-title\");\n        this.profileElement = document.getElementById(\"profile\");\n        this.profileFullNameElement = document.getElementById(\"profile-full-name\");\n        this.routes = [\n            {\n                route: \"#/\",\n                title: \"Главная\",\n                template: \"templates/index.html\",\n                styles: \"styles/style.css\",\n                load: function () {\n                }\n            },\n            {\n                route: \"#/signup\",\n                title: \"Регистрация\",\n                template: \"templates/signup.html\",\n                styles: \"styles/form.css\",\n                load: function () {\n                    new form_1.Form(\"signup\");\n                }\n            },\n            {\n                route: \"#/login\",\n                title: \"Вход в систему\",\n                template: \"templates/login.html\",\n                styles: \"styles/form.css\",\n                load: function () {\n                    new form_1.Form(\"login\");\n                }\n            },\n            {\n                route: \"#/choice\",\n                title: \"Test selection\",\n                template: \"templates/choice.html\",\n                styles: \"styles/choice.css\",\n                load: function () {\n                    new choice_1.Choice();\n                }\n            },\n            {\n                route: \"#/test\",\n                title: \"Taking the test\",\n                template: \"templates/test.html\",\n                styles: \"styles/test.css\",\n                load: function () {\n                    new test_1.Test();\n                }\n            },\n            {\n                route: \"#/result\",\n                title: \"Outcomes\",\n                template: \"templates/result.html\",\n                styles: \"styles/result.css\",\n                load: function () {\n                    new result_1.Result();\n                }\n            },\n            {\n                route: \"#/resultValue\",\n                title: \"Detailed outcomes\",\n                template: \"templates/resultValue.html\",\n                styles: \"styles/resultValue.css\",\n                load: function () {\n                    new resultValue_1.ResultValue();\n                }\n            }\n        ];\n    }\n    Router.prototype.openRoute = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var urlRoute, result, newRoute, _a, userInfo, accessToken;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        urlRoute = window.location.hash.split(\"?\")[0];\n                        if (!(urlRoute === \"#/logout\")) return [3 /*break*/, 2];\n                        return [4 /*yield*/, auth_1.Auth.logout()];\n                    case 1:\n                        result = _b.sent();\n                        if (result) {\n                            window.location.href = \"#/\";\n                            return [2 /*return*/];\n                        }\n                        _b.label = 2;\n                    case 2:\n                        newRoute = this.routes.find(function (item) { return item.route === urlRoute; });\n                        if (!newRoute) {\n                            window.location.href = \"#/\";\n                            return [2 /*return*/];\n                        }\n                        if (!this.contentElement || !this.stylesElement || !this.pageTitleElement\n                            || !this.profileElement || !this.profileFullNameElement || !this.profileElement) {\n                            if (urlRoute === '/') {\n                                return [2 /*return*/];\n                            }\n                            else {\n                                window.location.href = \"#/\";\n                                return [2 /*return*/];\n                            }\n                        }\n                        _a = this.contentElement;\n                        return [4 /*yield*/, fetch(newRoute.template).then(function (response) { return response.text(); })];\n                    case 3:\n                        _a.innerHTML = _b.sent();\n                        this.stylesElement.setAttribute(\"href\", newRoute.styles);\n                        this.pageTitleElement.innerText = newRoute.title;\n                        userInfo = auth_1.Auth.getUserInfo();\n                        accessToken = localStorage.getItem(auth_1.Auth.accessTokenKey);\n                        if (userInfo && accessToken) {\n                            this.profileElement.style.display = \"flex\";\n                            this.profileFullNameElement.innerText = userInfo.fullName;\n                        }\n                        else {\n                            this.profileElement.style.display = \"none\";\n                        }\n                        newRoute.load();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    return Router;\n}());\nexports.Router = Router;\n\n\n//# sourceURL=webpack://quiz/./src/router.ts?");

/***/ }),

/***/ "./src/services/auth.ts":
/*!******************************!*\
  !*** ./src/services/auth.ts ***!
  \******************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.Auth = void 0;\nvar config_1 = __importDefault(__webpack_require__(/*! ../config/config */ \"./src/config/config.ts\"));\nvar Auth = /** @class */ (function () {\n    function Auth() {\n    }\n    // Метод обновления refreshToken\n    Auth.processUnauthorizedResponse = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var refreshToken, response, result;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        refreshToken = localStorage.getItem(this.refreshTokenKey);\n                        if (!refreshToken) return [3 /*break*/, 3];\n                        return [4 /*yield*/, fetch(config_1.default.host + \"/refresh\", {\n                                method: \"POST\",\n                                headers: {\n                                    \"Content-type\": \"application/json\",\n                                    \"Accept\": \"application/json\"\n                                },\n                                body: JSON.stringify({ refreshToken: refreshToken })\n                            })];\n                    case 1:\n                        response = _a.sent();\n                        if (!(response && response.status === 200)) return [3 /*break*/, 3];\n                        return [4 /*yield*/, response.json()];\n                    case 2:\n                        result = _a.sent();\n                        if (result && !result.error && result.accessToken && result.refreshToken) {\n                            this.setTokens(result.accessToken, result.refreshToken);\n                            return [2 /*return*/, true];\n                        }\n                        _a.label = 3;\n                    case 3:\n                        this.removeTokens();\n                        location.href = \"/#\";\n                        return [2 /*return*/, false];\n                }\n            });\n        });\n    };\n    // Метод выхода с аккаунта\n    Auth.logout = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var refreshToken, response, result;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        refreshToken = localStorage.getItem(this.refreshTokenKey);\n                        if (!refreshToken) return [3 /*break*/, 3];\n                        return [4 /*yield*/, fetch(config_1.default.host + \"/logout\", {\n                                method: \"POST\",\n                                headers: {\n                                    \"Content-type\": \"application/json\",\n                                    \"Accept\": \"application/json\"\n                                },\n                                body: JSON.stringify({ refreshToken: refreshToken })\n                            })];\n                    case 1:\n                        response = _a.sent();\n                        if (!(response && response.status === 200)) return [3 /*break*/, 3];\n                        return [4 /*yield*/, response.json()];\n                    case 2:\n                        result = _a.sent();\n                        if (result && !result.error) {\n                            Auth.removeTokens();\n                            localStorage.removeItem(this.userInfoKey);\n                            return [2 /*return*/, true];\n                        }\n                        _a.label = 3;\n                    case 3: return [2 /*return*/, false];\n                }\n            });\n        });\n    };\n    // Метод записи токенов в локальное хранилище\n    Auth.setTokens = function (accessToken, refreshToken) {\n        localStorage.setItem(this.accessTokenKey, accessToken);\n        localStorage.setItem(this.refreshTokenKey, refreshToken);\n    };\n    // Метод удаления токенов с локального хранилища\n    Auth.removeTokens = function () {\n        localStorage.removeItem(this.accessTokenKey);\n        localStorage.removeItem(this.refreshTokenKey);\n    };\n    // Метод записи информации о пользователе в локальное хранилище\n    Auth.setUserInfo = function (info) {\n        localStorage.setItem(this.userInfoKey, JSON.stringify(info));\n    };\n    // Метод получения информации о пользователе с локального хранилища\n    Auth.getUserInfo = function () {\n        var userInfo = localStorage.getItem(this.userInfoKey);\n        if (userInfo) {\n            return JSON.parse(userInfo);\n        }\n        return null;\n    };\n    // Статические переменные для хранения названия ключей\n    Auth.accessTokenKey = \"accessToken\";\n    Auth.refreshTokenKey = \"refreshToken\";\n    Auth.userInfoKey = \"userInfo\";\n    return Auth;\n}());\nexports.Auth = Auth;\n\n\n//# sourceURL=webpack://quiz/./src/services/auth.ts?");

/***/ }),

/***/ "./src/services/castom-http.ts":
/*!*************************************!*\
  !*** ./src/services/castom-http.ts ***!
  \*************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.CustomHttp = void 0;\nvar auth_1 = __webpack_require__(/*! ./auth */ \"./src/services/auth.ts\");\nvar CustomHttp = /** @class */ (function () {\n    function CustomHttp() {\n    }\n    CustomHttp.request = function (url_1) {\n        return __awaiter(this, arguments, void 0, function (url, method, body) {\n            var params, token, response, result;\n            if (method === void 0) { method = \"GET\"; }\n            if (body === void 0) { body = null; }\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        params = {\n                            method: method,\n                            headers: {\n                                \"Content-type\": \"application/json\",\n                                \"Accept\": \"application/json\"\n                            }\n                        };\n                        token = localStorage.getItem(auth_1.Auth.accessTokenKey);\n                        if (token) {\n                            params.headers[\"x-access-token\"] = token;\n                        }\n                        // Если body пришло в функцию\n                        if (body) {\n                            // То мы params.body добавляем то что пришло\n                            params.body = JSON.stringify(body);\n                        }\n                        return [4 /*yield*/, fetch(url, params)];\n                    case 1:\n                        response = _a.sent();\n                        if (!(response.status < 200 || response.status >= 300)) return [3 /*break*/, 6];\n                        if (!(response.status === 401)) return [3 /*break*/, 5];\n                        return [4 /*yield*/, auth_1.Auth.processUnauthorizedResponse()];\n                    case 2:\n                        result = _a.sent();\n                        if (!result) return [3 /*break*/, 4];\n                        return [4 /*yield*/, this.request(url, method, body)];\n                    case 3: return [2 /*return*/, _a.sent()];\n                    case 4: return [2 /*return*/, null];\n                    case 5: throw new Error(response.statusText);\n                    case 6: return [4 /*yield*/, response.json()];\n                    case 7: return [2 /*return*/, _a.sent()];\n                }\n            });\n        });\n    };\n    return CustomHttp;\n}());\nexports.CustomHttp = CustomHttp;\n\n\n//# sourceURL=webpack://quiz/./src/services/castom-http.ts?");

/***/ }),

/***/ "./src/types/action-test.type.ts":
/*!***************************************!*\
  !*** ./src/types/action-test.type.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.ActionTestType = void 0;\nvar ActionTestType;\n(function (ActionTestType) {\n    ActionTestType[\"next\"] = \"next\";\n    ActionTestType[\"prev\"] = \"prev\";\n    ActionTestType[\"pass\"] = \"pass\";\n})(ActionTestType || (exports.ActionTestType = ActionTestType = {}));\n\n\n//# sourceURL=webpack://quiz/./src/types/action-test.type.ts?");

/***/ }),

/***/ "./src/utils/store-manager.ts":
/*!************************************!*\
  !*** ./src/utils/store-manager.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.StoreManager = void 0;\nvar StoreManager = /** @class */ (function () {\n    function StoreManager() {\n    }\n    StoreManager.getQueryParams = function () {\n        var sq = document.location.hash.split(\"+\").join(\" \");\n        var params = {}, tokens, re = /[?&]([^=]+)=([^&]*)/g;\n        while (tokens = re.exec(sq)) {\n            params[decodeURIComponent(tokens[1])] = decodeURIComponent(tokens[2]);\n        }\n        return params;\n    };\n    return StoreManager;\n}());\nexports.StoreManager = StoreManager;\n\n\n//# sourceURL=webpack://quiz/./src/utils/store-manager.ts?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./src/app.ts");
/******/ 	
/******/ })()
;